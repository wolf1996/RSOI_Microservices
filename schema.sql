-- noinspection SqlNoDataSourceInspectionForFile

DROP DATABASE IF EXISTS authdb;
CREATE DATABASE authdb;

DROP USER IF EXISTS auth_user;
CREATE USER auth_user WITH  PASSWORD '123456';

GRANT ALL PRIVILEGES ON DATABASE authdb TO auth_user;

\c authdb;

CREATE EXTENSION pgcrypto;

DROP TABLE IF EXISTS AUTH_INFO;
CREATE TABLE AUTH_INFO (
  ID       SERIAL PRIMARY KEY ,
  LOGIN    VARCHAR(256),
  PASSHASH VARCHAR(1024),
  ROLE     INT
);

DROP TABLE IF EXISTS CLIENTS_INFO;
CREATE TABLE CLIENTS_INFO(
  ID             SERIAL PRIMARY KEY,
  NAME           VARCHAR(256),
  SECRET         VARCHAR(256),
  REDIR_URL      VARCHAR(256)
);
-- 123456 123123, salt 123456
INSERT INTO AUTH_INFO VALUES  (DEFAULT, 'eventOwner', '12tir.zIbWQ3c', 0);
INSERT INTO AUTH_INFO VALUES  (DEFAULT, 'simpleUser', '12vjy8B6VZQUU', 0);
INSERT INTO AUTH_INFO VALUES  (DEFAULT, 'admin', '12vjy8B6VZQUU', 1);
INSERT INTO CLIENTS_INFO VALUES  (DEFAULT,'some client name', '12tir.zIbWQ3c', 'http://localhost:9191/token');
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO auth_user;
